<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TEMP WISE</title>
  <link rel="stylesheet" href="front.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
</head>
<body>
  <header>
    <img src="backend/pictures/logo2.png" alt="TempWise Logo" class="logo">
    <h1>TEMP WISE</h1>
  </header>

  <div class="graph-wrapper">
    <canvas id="myChart" width="400" height="200"></canvas>  
    <div class="side-buttons">
      <button id="simulate-btn">Simulate Data</button>
      <button id="collect-btn">Collect Data</button>
    </div>
  </div>

  <button id="predict-btn">Predict</button>

  <script>
    var ctx = document.getElementById("myChart").getContext("2d");
    let simulationInterval = null;
    let startTime = null;

    // Initialize the chart
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [],
            datasets: [{
                label: 'Temperature (Â°C)',
                data: [],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 2,
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });

    function getRandomInRange(lower, upper) {
        return lower + (Math.random() * (upper - lower));
    }

    function addDataPoint() {
        const timeStamp = new Date().toLocaleTimeString();
        const temperature = getRandomInRange(10, 30); // Adjust range as needed

        // Add new data
        myChart.data.labels.push(timeStamp);
        myChart.data.datasets[0].data.push(temperature);

        // Limit to 20 points; shift data if more than 20 points
        if (myChart.data.labels.length > 20) {
            myChart.data.labels.shift();
            myChart.data.datasets[0].data.shift();
        }

        // Clear and reset the chart
        myChart.update('none'); // Update chart but avoid animation
        myChart.update();  // Force chart update with animation
    }

    // Event listener for simulate button
    document.getElementById("simulate-btn").addEventListener("click", function() {
        if (simulationInterval) {
            // Stop simulation
            clearInterval(simulationInterval);
            simulationInterval = null;
            this.textContent = "Simulate Data";
            this.style.backgroundColor = "#006A71";
        } else {
            // Start simulation
            startTime = new Date();
            simulationInterval = setInterval(addDataPoint, 1000); // Update every 1 second
            this.textContent = "Stop Simulation";
            this.style.backgroundColor = "#9ACBD0";
        }
    });

    // Event listener for predict button
    document.getElementById("predict-btn").addEventListener("click", function(){
        alert("Starting Prediction!")
    });

    // Event listener for collect button
    document.getElementById("collect-btn").addEventListener("click", function(){
        alert("Starting Data Collection!")
    });

  </script>
</body>
</html>
